<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Session 9 Restructuring and Merging Data. | Kent R training</title>
  <meta name="description" content="This is a work in progress" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Session 9 Restructuring and Merging Data. | Kent R training" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a work in progress" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Session 9 Restructuring and Merging Data. | Kent R training" />
  
  <meta name="twitter:description" content="This is a work in progress" />
  

<meta name="author" content="Lazaros Gonidis" />


<meta name="date" content="2020-10-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="session8.html"/>

<script src="libs/header-attrs-2.4/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Kent R training</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prelude</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#a-few-words"><i class="fa fa-check"></i><b>1.1</b> A few words…</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#a-comment-on-the-book-structure"><i class="fa fa-check"></i><b>1.2</b> A comment on the book structure</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#learning-objectives"><i class="fa fa-check"></i><b>2.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#getting-things-ready"><i class="fa fa-check"></i><b>2.2</b> Getting Things Ready</a></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#starting-with-rstudio"><i class="fa fa-check"></i><b>2.3</b> Starting with RStudio</a></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#console"><i class="fa fa-check"></i><b>2.4</b> Console</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introduction.html"><a href="introduction.html#exercise-1"><i class="fa fa-check"></i><b>2.4.1</b> Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introduction.html"><a href="introduction.html#environment"><i class="fa fa-check"></i><b>2.5</b> Environment</a></li>
<li class="chapter" data-level="2.6" data-path="introduction.html"><a href="introduction.html#files"><i class="fa fa-check"></i><b>2.6</b> Files</a></li>
<li class="chapter" data-level="2.7" data-path="introduction.html"><a href="introduction.html#scripts"><i class="fa fa-check"></i><b>2.7</b> Scripts</a></li>
<li class="chapter" data-level="2.8" data-path="introduction.html"><a href="introduction.html#exercise-2"><i class="fa fa-check"></i><b>2.8</b> Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="session2.html"><a href="session2.html"><i class="fa fa-check"></i><b>3</b> Using Vectors and Functions</a>
<ul>
<li class="chapter" data-level="3.1" data-path="session2.html"><a href="session2.html#learning-objectives-1"><i class="fa fa-check"></i><b>3.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="3.2" data-path="session2.html"><a href="session2.html#vectors"><i class="fa fa-check"></i><b>3.2</b> Vectors</a></li>
<li class="chapter" data-level="3.3" data-path="session2.html"><a href="session2.html#creating-vectors-with-random-numbers"><i class="fa fa-check"></i><b>3.3</b> Creating vectors with random numbers</a></li>
<li class="chapter" data-level="3.4" data-path="session2.html"><a href="session2.html#frequency-tables-in-r-and-histograms"><i class="fa fa-check"></i><b>3.4</b> Frequency tables in R and Histograms</a></li>
<li class="chapter" data-level="3.5" data-path="session2.html"><a href="session2.html#exercise-3"><i class="fa fa-check"></i><b>3.5</b> Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="session3.html"><a href="session3.html"><i class="fa fa-check"></i><b>4</b> Packages</a>
<ul>
<li class="chapter" data-level="4.1" data-path="session3.html"><a href="session3.html#what-we-have-learnt-so-far"><i class="fa fa-check"></i><b>4.1</b> What we have learnt so far</a></li>
<li class="chapter" data-level="4.2" data-path="session3.html"><a href="session3.html#learning-objectives-2"><i class="fa fa-check"></i><b>4.2</b> Learning objectives</a></li>
<li class="chapter" data-level="4.3" data-path="session3.html"><a href="session3.html#lets-get-started"><i class="fa fa-check"></i><b>4.3</b> Let’s get started</a></li>
<li class="chapter" data-level="4.4" data-path="session3.html"><a href="session3.html#measures-of-central-tendency"><i class="fa fa-check"></i><b>4.4</b> Measures of Central Tendency</a></li>
<li class="chapter" data-level="4.5" data-path="session3.html"><a href="session3.html#adding-a-new-package"><i class="fa fa-check"></i><b>4.5</b> Adding a new package</a></li>
<li class="chapter" data-level="4.6" data-path="session3.html"><a href="session3.html#to-sum-up"><i class="fa fa-check"></i><b>4.6</b> To sum up</a></li>
<li class="chapter" data-level="4.7" data-path="session3.html"><a href="session3.html#additional-exercises-spoiler-alert-if-you-get-stuck-the-answers-are-at-the-end-of-the-pdf"><i class="fa fa-check"></i><b>4.7</b> Additional Exercises (spoiler alert: if you get stuck the answers are at the end of the pdf)</a></li>
<li class="chapter" data-level="4.8" data-path="session3.html"><a href="session3.html#solutions-spoiler-alert"><i class="fa fa-check"></i><b>4.8</b> Solutions: SPOILER ALERT</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="session4.html"><a href="session4.html"><i class="fa fa-check"></i><b>5</b> Tidyverse 1</a>
<ul>
<li class="chapter" data-level="5.1" data-path="session4.html"><a href="session4.html#thinking-ahead"><i class="fa fa-check"></i><b>5.1</b> Thinking ahead</a></li>
<li class="chapter" data-level="5.2" data-path="session4.html"><a href="session4.html#learning-objectives-3"><i class="fa fa-check"></i><b>5.2</b> Learning objectives</a></li>
<li class="chapter" data-level="5.3" data-path="session4.html"><a href="session4.html#our-first-data-file"><i class="fa fa-check"></i><b>5.3</b> Our first data file</a></li>
<li class="chapter" data-level="5.4" data-path="session4.html"><a href="session4.html#correcting-variable-types"><i class="fa fa-check"></i><b>5.4</b> Correcting Variable Types</a></li>
<li class="chapter" data-level="5.5" data-path="session4.html"><a href="session4.html#recoding"><i class="fa fa-check"></i><b>5.5</b> Recoding</a></li>
<li class="chapter" data-level="5.6" data-path="session4.html"><a href="session4.html#exercise-9"><i class="fa fa-check"></i><b>5.6</b> Exercise 9</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="session5.html"><a href="session5.html"><i class="fa fa-check"></i><b>6</b> Tidyverse 2</a>
<ul>
<li class="chapter" data-level="6.1" data-path="session5.html"><a href="session5.html#reflecting-on-the-last-session"><i class="fa fa-check"></i><b>6.1</b> Reflecting on the last session</a></li>
<li class="chapter" data-level="6.2" data-path="session5.html"><a href="session5.html#pipe-operator"><i class="fa fa-check"></i><b>6.2</b> Pipe Operator %&lt;%</a></li>
<li class="chapter" data-level="6.3" data-path="session5.html"><a href="session5.html#exercise-10"><i class="fa fa-check"></i><b>6.3</b> Exercise 10</a></li>
<li class="chapter" data-level="6.4" data-path="session5.html"><a href="session5.html#grouping-spliting-and-summarizing-variables-across-out-data-frame"><i class="fa fa-check"></i><b>6.4</b> Grouping, spliting, and summarizing variables across out data frame</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="session7.html"><a href="session7.html"><i class="fa fa-check"></i><b>7</b> Bringing Everything Together. Part I</a>
<ul>
<li class="chapter" data-level="7.1" data-path="session7.html"><a href="session7.html#reflecting-on-day-1"><i class="fa fa-check"></i><b>7.1</b> Reflecting on Day 1</a></li>
<li class="chapter" data-level="7.2" data-path="session7.html"><a href="session7.html#learning-objectives-4"><i class="fa fa-check"></i><b>7.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="7.3" data-path="session7.html"><a href="session7.html#working-with-the-file"><i class="fa fa-check"></i><b>7.3</b> Working with the file</a></li>
<li class="chapter" data-level="7.4" data-path="session7.html"><a href="session7.html#exercise-11"><i class="fa fa-check"></i><b>7.4</b> Exercise 11</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="session8.html"><a href="session8.html"><i class="fa fa-check"></i><b>8</b> Bringing Everything Together. Part II</a>
<ul>
<li class="chapter" data-level="8.1" data-path="session8.html"><a href="session8.html#learning-objectives-5"><i class="fa fa-check"></i><b>8.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="8.2" data-path="session8.html"><a href="session8.html#continuing-with-the-exercise-10-and-two-way-anova"><i class="fa fa-check"></i><b>8.2</b> Continuing with the exercise 10 and two-way ANOVA</a></li>
<li class="chapter" data-level="8.3" data-path="session8.html"><a href="session8.html#exercise-12"><i class="fa fa-check"></i><b>8.3</b> Exercise 12</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="session9.html"><a href="session9.html"><i class="fa fa-check"></i><b>9</b> Restructuring and Merging Data.</a>
<ul>
<li class="chapter" data-level="9.1" data-path="session9.html"><a href="session9.html#learning-objectives-6"><i class="fa fa-check"></i><b>9.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="9.2" data-path="session9.html"><a href="session9.html#restructuring-data"><i class="fa fa-check"></i><b>9.2</b> Restructuring Data</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Kent R training</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="session9" class="section level1" number="9">
<h1><span class="header-section-number">Session 9</span> Restructuring and Merging Data.</h1>
<div id="learning-objectives-6" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Learning Objectives</h2>
<p>In this session we will learn how to change from <strong>wide</strong> to <strong>long</strong> data and vice versa. We will also learn how to merge two different datasets and carry out a correlation analysis.</p>
</div>
<div id="restructuring-data" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Restructuring Data</h2>
<p>As we have seen so far we have been working with datasets in <strong>long</strong> format. Meaning we have different columns to denote our variables and our dependent variable only in one column. However, there will be cases where we will need to use what is called a <strong>wide</strong> format where we will need to have measures across different columns.<br />
For example, in the previous stroop paradigm we may want to have one column for the <strong>salient</strong> reaction times and one column for the **neutral* reaction times. One reason why we may need this is because we may want to calculate a new variable that will be the difference between the two variables. That way we will end up having one row per participant which will make our dataset ideal for merging with another dataset that contains questionnaires responses. Our goal for this session will be to merge experimental and survey data in one file and carry out correlational analysis.</p>
<p>For restructuring our data we will be using <strong>pivot_wider()</strong> and <strong>pivot_longer()</strong>. Both are part of tidyverse and specifically <strong>tidyr</strong>. They are new implementations and will probably replace <strong>spread()</strong> and <strong>gather()</strong>. Most tutorials on the web use spread and gather. We will use both the new and old approach.</p>
<p>Let us continue our work from the previous session and work with the file “stroopfinal”.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="session9.html#cb65-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb65-2"><a href="session9.html#cb65-2"></a></span>
<span id="cb65-3"><a href="session9.html#cb65-3"></a>dflong &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;stroopfinal.csv&quot;</span>)</span></code></pre></div>
<p>We will now convert our dataframe from long to wide format. We will do using two different ways. Spread() and gather() are being depreciated but we still use them as an example.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="session9.html#cb66-1"></a><span class="co">## we now want to bring the file to a form that will have two RTs columns</span></span>
<span id="cb66-2"><a href="session9.html#cb66-2"></a><span class="co">## one for salience trials and one for neutral trials</span></span>
<span id="cb66-3"><a href="session9.html#cb66-3"></a>dfwide &lt;-<span class="st"> </span>dflong <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb66-4"><a href="session9.html#cb66-4"></a><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> salience, <span class="dt">values_from =</span> RT)</span>
<span id="cb66-5"><a href="session9.html#cb66-5"></a></span>
<span id="cb66-6"><a href="session9.html#cb66-6"></a><span class="co">## we could do the same with spread()</span></span>
<span id="cb66-7"><a href="session9.html#cb66-7"></a>dfwide2 &lt;-<span class="st"> </span>dflong <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb66-8"><a href="session9.html#cb66-8"></a><span class="st">  </span><span class="kw">spread</span>(salience, RT)</span></code></pre></div>
<p>Just for practice we can revert back from wide to long format.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="session9.html#cb67-1"></a><span class="co">## Let us now try to convert the wide file back to long</span></span>
<span id="cb67-2"><a href="session9.html#cb67-2"></a></span>
<span id="cb67-3"><a href="session9.html#cb67-3"></a>dflong2 &lt;-<span class="st"> </span>dfwide <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb67-4"><a href="session9.html#cb67-4"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="kw">c</span>(Gambling, Neutral), </span>
<span id="cb67-5"><a href="session9.html#cb67-5"></a>               <span class="dt">names_to =</span> <span class="st">&quot;Salience&quot;</span>, </span>
<span id="cb67-6"><a href="session9.html#cb67-6"></a>               <span class="dt">values_to =</span> <span class="st">&quot;Reaction&quot;</span>)</span>
<span id="cb67-7"><a href="session9.html#cb67-7"></a><span class="co">### It would be very similar using gather</span></span>
<span id="cb67-8"><a href="session9.html#cb67-8"></a></span>
<span id="cb67-9"><a href="session9.html#cb67-9"></a>dflong3 &lt;-<span class="st"> </span>dfwide <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb67-10"><a href="session9.html#cb67-10"></a><span class="st">  </span><span class="kw">gather</span>(<span class="dt">key =</span> <span class="st">&quot;Salience&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;Reaction&quot;</span>, Gambling, Neutral)</span>
<span id="cb67-11"><a href="session9.html#cb67-11"></a></span>
<span id="cb67-12"><a href="session9.html#cb67-12"></a><span class="co">## dflong2 and dflong3 look different as they are sorted by different variable</span></span>
<span id="cb67-13"><a href="session9.html#cb67-13"></a><span class="co">## this is just a visual difference but we can fix it anyway</span></span>
<span id="cb67-14"><a href="session9.html#cb67-14"></a></span>
<span id="cb67-15"><a href="session9.html#cb67-15"></a>dflong3 &lt;-<span class="st"> </span>dflong3 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb67-16"><a href="session9.html#cb67-16"></a><span class="st">  </span><span class="kw">arrange</span>(participant, group)</span></code></pre></div>
<p>As I said we do not need to revert back to the long format. We will carry on working with the wide format and calculate our <strong>diff</strong> variable.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="session9.html#cb68-1"></a>dfwide &lt;-<span class="st"> </span>dfwide <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb68-2"><a href="session9.html#cb68-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">diff =</span> Gambling <span class="op">-</span><span class="st"> </span>Neutral)</span></code></pre></div>
<p>It would be very interesting now to see whether this difference correlates with the frequency of games. Let’s also load the questionnaire.csv and merge it with our widedf.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="session9.html#cb69-1"></a><span class="co">## load our datafile</span></span>
<span id="cb69-2"><a href="session9.html#cb69-2"></a>questionnaire &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;questionnaire.csv&quot;</span>)</span>
<span id="cb69-3"><a href="session9.html#cb69-3"></a></span>
<span id="cb69-4"><a href="session9.html#cb69-4"></a><span class="co">## let&#39;s merge the two datasets dfwide and questionnaire</span></span>
<span id="cb69-5"><a href="session9.html#cb69-5"></a><span class="co">## first lets do it the wrong way</span></span>
<span id="cb69-6"><a href="session9.html#cb69-6"></a></span>
<span id="cb69-7"><a href="session9.html#cb69-7"></a>dfall &lt;-<span class="kw">left_join</span>(dfwide, questionnaire)</span>
<span id="cb69-8"><a href="session9.html#cb69-8"></a></span>
<span id="cb69-9"><a href="session9.html#cb69-9"></a><span class="co">## this will generate an error as group in questionnaire is not a factor</span></span>
<span id="cb69-10"><a href="session9.html#cb69-10"></a><span class="co">## also group in the questionnaire is 1 and 2 not the same as in dfwide</span></span>
<span id="cb69-11"><a href="session9.html#cb69-11"></a><span class="co">## also left_join() is not the appropriate function for our case</span></span>
<span id="cb69-12"><a href="session9.html#cb69-12"></a>questionnaire &lt;-<span class="st"> </span>questionnaire <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb69-13"><a href="session9.html#cb69-13"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">group =</span> <span class="kw">recode</span>(group,<span class="st">&#39;1&#39;</span> =<span class="st"> &quot;gambling&quot;</span>, <span class="st">&#39;2&#39;</span>=<span class="st">&quot;control&quot;</span>),</span>
<span id="cb69-14"><a href="session9.html#cb69-14"></a>         <span class="dt">group =</span> <span class="kw">as.factor</span>(group))</span>
<span id="cb69-15"><a href="session9.html#cb69-15"></a></span>
<span id="cb69-16"><a href="session9.html#cb69-16"></a>dfwide<span class="op">$</span>group =<span class="st"> </span><span class="kw">as.factor</span>(dfwide<span class="op">$</span>group)</span>
<span id="cb69-17"><a href="session9.html#cb69-17"></a></span>
<span id="cb69-18"><a href="session9.html#cb69-18"></a></span>
<span id="cb69-19"><a href="session9.html#cb69-19"></a><span class="co">## let&#39;s merge the two datasets dfwide and questionnaire</span></span>
<span id="cb69-20"><a href="session9.html#cb69-20"></a></span>
<span id="cb69-21"><a href="session9.html#cb69-21"></a>dfall &lt;-<span class="kw">full_join</span>(dfwide, questionnaire)</span></code></pre></div>
<p>That worked fine, even though we have some missing values. Let’s see now if we have any significant correlation between the stroop difference and the frequency of games.</p>
<p>Let’ s start with a simple scatterplot.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="session9.html#cb70-1"></a>scatter &lt;-<span class="st"> </span><span class="kw">ggplot</span>(dfall, <span class="kw">aes</span>(<span class="dt">x =</span> games, <span class="dt">y =</span> diff)) <span class="op">+</span></span>
<span id="cb70-2"><a href="session9.html#cb70-2"></a><span class="st">  </span><span class="kw">geom_point</span>() </span>
<span id="cb70-3"><a href="session9.html#cb70-3"></a></span>
<span id="cb70-4"><a href="session9.html#cb70-4"></a>scatter</span></code></pre></div>
<p>This looks rather unexciting, perhaps group can make things more interesting.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="session9.html#cb71-1"></a>scatter &lt;-<span class="st"> </span><span class="kw">ggplot</span>(dfall, <span class="kw">aes</span>(<span class="dt">x =</span> games, <span class="dt">y =</span> diff, <span class="dt">color =</span> group)) <span class="op">+</span></span>
<span id="cb71-2"><a href="session9.html#cb71-2"></a><span class="st">  </span><span class="kw">geom_point</span>() </span>
<span id="cb71-3"><a href="session9.html#cb71-3"></a></span>
<span id="cb71-4"><a href="session9.html#cb71-4"></a>scatter</span></code></pre></div>
<p>Let’s carry out the correlational analysis next.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="session9.html#cb72-1"></a><span class="kw">library</span>(Hmisc)</span>
<span id="cb72-2"><a href="session9.html#cb72-2"></a>dfgambling &lt;-<span class="st"> </span>dfall <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb72-3"><a href="session9.html#cb72-3"></a><span class="st">  </span><span class="kw">filter</span>(group <span class="op">==</span><span class="st"> &quot;gambling&quot;</span>)</span>
<span id="cb72-4"><a href="session9.html#cb72-4"></a><span class="kw">rcorr</span>(dfgambling<span class="op">$</span>games, dfgambling<span class="op">$</span>diff)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="session8.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Kent R training.pdf", "Kent R training.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
