<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter6 Tidyverse 2 | Kent R training</title>
  <meta name="description" content="This is a work in progress" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter6 Tidyverse 2 | Kent R training" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a work in progress" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter6 Tidyverse 2 | Kent R training" />
  
  <meta name="twitter:description" content="This is a work in progress" />
  

<meta name="author" content="Lazaros Gonidis" />


<meta name="date" content="2022-04-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="session4.html"/>
<link rel="next" href="session7.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Kent R training</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prelude</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#a-few-words"><i class="fa fa-check"></i><b>1.1</b> A few words…</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#a-comment-on-the-course-structure"><i class="fa fa-check"></i><b>1.2</b> A comment on the course structure</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#learning-objectives"><i class="fa fa-check"></i><b>2.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#getting-things-ready"><i class="fa fa-check"></i><b>2.2</b> Getting Things Ready</a></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#starting-with-rstudio"><i class="fa fa-check"></i><b>2.3</b> Starting with RStudio</a></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#console"><i class="fa fa-check"></i><b>2.4</b> Console</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introduction.html"><a href="introduction.html#exercise-1.1"><i class="fa fa-check"></i><b>2.4.1</b> Exercise 1.1</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introduction.html"><a href="introduction.html#environment"><i class="fa fa-check"></i><b>2.5</b> Environment</a></li>
<li class="chapter" data-level="2.6" data-path="introduction.html"><a href="introduction.html#files"><i class="fa fa-check"></i><b>2.6</b> Files</a></li>
<li class="chapter" data-level="2.7" data-path="introduction.html"><a href="introduction.html#scripts"><i class="fa fa-check"></i><b>2.7</b> Scripts</a></li>
<li class="chapter" data-level="2.8" data-path="introduction.html"><a href="introduction.html#exercise-1.2"><i class="fa fa-check"></i><b>2.8</b> Exercise 1.2</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="session2.html"><a href="session2.html"><i class="fa fa-check"></i><b>3</b> Using Vectors and Functions</a>
<ul>
<li class="chapter" data-level="3.1" data-path="session2.html"><a href="session2.html#learning-objectives-1"><i class="fa fa-check"></i><b>3.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="3.2" data-path="session2.html"><a href="session2.html#r-objects-vectors"><i class="fa fa-check"></i><b>3.2</b> R-objects: Vectors</a></li>
<li class="chapter" data-level="3.3" data-path="session2.html"><a href="session2.html#r-objects-lists"><i class="fa fa-check"></i><b>3.3</b> R-objects: Lists</a></li>
<li class="chapter" data-level="3.4" data-path="session2.html"><a href="session2.html#r-objects-dataframes"><i class="fa fa-check"></i><b>3.4</b> R-objects: Dataframes</a></li>
<li class="chapter" data-level="3.5" data-path="session2.html"><a href="session2.html#r-objects-factors"><i class="fa fa-check"></i><b>3.5</b> R-objects: Factors</a></li>
<li class="chapter" data-level="3.6" data-path="session2.html"><a href="session2.html#exercise-2.1"><i class="fa fa-check"></i><b>3.6</b> Exercise 2.1</a></li>
<li class="chapter" data-level="3.7" data-path="session2.html"><a href="session2.html#creating-vectors-with-random-numbers"><i class="fa fa-check"></i><b>3.7</b> Creating vectors with random numbers</a></li>
<li class="chapter" data-level="3.8" data-path="session2.html"><a href="session2.html#frequency-tables-in-r-and-histograms"><i class="fa fa-check"></i><b>3.8</b> Frequency tables in R and Histograms</a></li>
<li class="chapter" data-level="3.9" data-path="session2.html"><a href="session2.html#exercise-2.2"><i class="fa fa-check"></i><b>3.9</b> Exercise 2.2</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="session3.html"><a href="session3.html"><i class="fa fa-check"></i><b>4</b> Packages</a>
<ul>
<li class="chapter" data-level="4.1" data-path="session3.html"><a href="session3.html#what-we-have-learnt-so-far"><i class="fa fa-check"></i><b>4.1</b> What we have learnt so far</a></li>
<li class="chapter" data-level="4.2" data-path="session3.html"><a href="session3.html#learning-objectives-2"><i class="fa fa-check"></i><b>4.2</b> Learning objectives</a></li>
<li class="chapter" data-level="4.3" data-path="session3.html"><a href="session3.html#lets-get-started"><i class="fa fa-check"></i><b>4.3</b> Let’s get started</a></li>
<li class="chapter" data-level="4.4" data-path="session3.html"><a href="session3.html#measures-of-central-tendency"><i class="fa fa-check"></i><b>4.4</b> Measures of Central Tendency</a></li>
<li class="chapter" data-level="4.5" data-path="session3.html"><a href="session3.html#adding-a-new-package"><i class="fa fa-check"></i><b>4.5</b> Adding a new package</a></li>
<li class="chapter" data-level="4.6" data-path="session3.html"><a href="session3.html#to-sum-up"><i class="fa fa-check"></i><b>4.6</b> To sum up</a></li>
<li class="chapter" data-level="4.7" data-path="session3.html"><a href="session3.html#additional-exercises-spoiler-alert-if-you-get-stuck-the-answers-are-at-the-end-of-the-pdf"><i class="fa fa-check"></i><b>4.7</b> Additional Exercises (spoiler alert: if you get stuck the answers are at the end of the pdf)</a></li>
<li class="chapter" data-level="4.8" data-path="session3.html"><a href="session3.html#solutions-spoiler-alert"><i class="fa fa-check"></i><b>4.8</b> Solutions: SPOILER ALERT</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="session4.html"><a href="session4.html"><i class="fa fa-check"></i><b>5</b> Starting to work with datafiles using Tidyverse</a>
<ul>
<li class="chapter" data-level="5.1" data-path="session4.html"><a href="session4.html#thinking-ahead"><i class="fa fa-check"></i><b>5.1</b> Thinking ahead</a></li>
<li class="chapter" data-level="5.2" data-path="session4.html"><a href="session4.html#learning-objectives-3"><i class="fa fa-check"></i><b>5.2</b> Learning objectives</a></li>
<li class="chapter" data-level="5.3" data-path="session4.html"><a href="session4.html#our-first-data-file"><i class="fa fa-check"></i><b>5.3</b> Our first data file</a></li>
<li class="chapter" data-level="5.4" data-path="session4.html"><a href="session4.html#correcting-variable-types"><i class="fa fa-check"></i><b>5.4</b> Correcting Variable Types</a></li>
<li class="chapter" data-level="5.5" data-path="session4.html"><a href="session4.html#exercise-4.1"><i class="fa fa-check"></i><b>5.5</b> Exercise 4.1</a></li>
<li class="chapter" data-level="5.6" data-path="session4.html"><a href="session4.html#dropping-columns-and-rows"><i class="fa fa-check"></i><b>5.6</b> Dropping columns and rows</a></li>
<li class="chapter" data-level="5.7" data-path="session4.html"><a href="session4.html#exercise-4.2"><i class="fa fa-check"></i><b>5.7</b> Exercise 4.2</a></li>
<li class="chapter" data-level="5.8" data-path="session4.html"><a href="session4.html#recoding"><i class="fa fa-check"></i><b>5.8</b> Recoding</a></li>
<li class="chapter" data-level="5.9" data-path="session4.html"><a href="session4.html#exercise-4.3"><i class="fa fa-check"></i><b>5.9</b> Exercise 4.3</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="session5.html"><a href="session5.html"><i class="fa fa-check"></i><b>6</b> Tidyverse 2</a>
<ul>
<li class="chapter" data-level="6.1" data-path="session5.html"><a href="session5.html#reflecting-on-the-last-session"><i class="fa fa-check"></i><b>6.1</b> Reflecting on the last session</a></li>
<li class="chapter" data-level="6.2" data-path="session5.html"><a href="session5.html#learning-objectives-4"><i class="fa fa-check"></i><b>6.2</b> Learning objectives</a></li>
<li class="chapter" data-level="6.3" data-path="session5.html"><a href="session5.html#pipe-operator"><i class="fa fa-check"></i><b>6.3</b> Pipe Operator <code>%&gt;%</code></a></li>
<li class="chapter" data-level="6.4" data-path="session5.html"><a href="session5.html#an-example-of-a-fyp-data-analysis"><i class="fa fa-check"></i><b>6.4</b> An example of a FYP data analysis</a></li>
<li class="chapter" data-level="6.5" data-path="session5.html"><a href="session5.html#a-brief-overview-of-our-data"><i class="fa fa-check"></i><b>6.5</b> A brief overview of our data</a></li>
<li class="chapter" data-level="6.6" data-path="session5.html"><a href="session5.html#exercise-6.1"><i class="fa fa-check"></i><b>6.6</b> Exercise 6.1</a></li>
<li class="chapter" data-level="6.7" data-path="session5.html"><a href="session5.html#working-through-our-participants-section"><i class="fa fa-check"></i><b>6.7</b> Working through our participants section</a></li>
<li class="chapter" data-level="6.8" data-path="session5.html"><a href="session5.html#exercise-6.2"><i class="fa fa-check"></i><b>6.8</b> Exercise 6.2</a></li>
<li class="chapter" data-level="6.9" data-path="session5.html"><a href="session5.html#running-a-simple-correlational-analysis-for-frequency-and-days"><i class="fa fa-check"></i><b>6.9</b> Running a simple correlational analysis for Frequency and Days</a></li>
<li class="chapter" data-level="6.10" data-path="session5.html"><a href="session5.html#in-conclusion"><i class="fa fa-check"></i><b>6.10</b> In conclusion</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="session7.html"><a href="session7.html"><i class="fa fa-check"></i><b>7</b> Bringing Everything Together. Part I</a>
<ul>
<li class="chapter" data-level="7.1" data-path="session7.html"><a href="session7.html#reflecting-on-day-1"><i class="fa fa-check"></i><b>7.1</b> Reflecting on Day 1</a></li>
<li class="chapter" data-level="7.2" data-path="session7.html"><a href="session7.html#learning-objectives-5"><i class="fa fa-check"></i><b>7.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="7.3" data-path="session7.html"><a href="session7.html#working-with-the-file"><i class="fa fa-check"></i><b>7.3</b> Working with the file</a></li>
<li class="chapter" data-level="7.4" data-path="session7.html"><a href="session7.html#exercise-6.1-1"><i class="fa fa-check"></i><b>7.4</b> Exercise 6.1</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="session8.html"><a href="session8.html"><i class="fa fa-check"></i><b>8</b> Bringing Everything Together. Part II</a>
<ul>
<li class="chapter" data-level="8.1" data-path="session8.html"><a href="session8.html#learning-objectives-6"><i class="fa fa-check"></i><b>8.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="8.2" data-path="session8.html"><a href="session8.html#continuing-with-the-exercise-10-and-two-way-anova"><i class="fa fa-check"></i><b>8.2</b> Continuing with the exercise 10 and two-way ANOVA</a></li>
<li class="chapter" data-level="8.3" data-path="session8.html"><a href="session8.html#exercise-7.1"><i class="fa fa-check"></i><b>8.3</b> Exercise 7.1</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="session9.html"><a href="session9.html"><i class="fa fa-check"></i><b>9</b> Restructuring and Merging Data.</a>
<ul>
<li class="chapter" data-level="9.1" data-path="session9.html"><a href="session9.html#learning-objectives-7"><i class="fa fa-check"></i><b>9.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="9.2" data-path="session9.html"><a href="session9.html#restructuring-data"><i class="fa fa-check"></i><b>9.2</b> Restructuring Data</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Kent R training</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="session5" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter6</span> Tidyverse 2<a href="session5.html#session5" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="reflecting-on-the-last-session" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Reflecting on the last session<a href="session5.html#reflecting-on-the-last-session" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We have managed to do quite a few tasks already. However, we also managed to create a proper mess in the process. Our <strong>environment</strong> must be full of objects that we will not be using. And even though we could remove them it is best if we actually do not create them in the first place. That can be achieved with the use of the <strong>pipe operator</strong> or else <code>%&gt;%</code> (<strong>ctrl+shift+m</strong>).</p>
</div>
<div id="learning-objectives-4" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Learning objectives<a href="session5.html#learning-objectives-4" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>Work more efficiently using tidyverse (dplyr and tidyr)</li>
<li>manipulating data</li>
<li>summarising data (in brief)</li>
</ol>
<p><strong>Note:</strong> In this session we will be focusing on describing a number of tasks and then discussing how we can best perform them. We have already introduced enough concepts to do really meaningful work. Now we have to put our progress to the test.</p>
</div>
<div id="pipe-operator" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Pipe Operator <code>%&gt;%</code><a href="session5.html#pipe-operator" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Lets start with seeing how the <strong>pipe operator</strong> works. If you think about the last exercise in the previous session you can remember that it took a number of steps where we kept assigning our work to a new data frame. With the use of <code>%&gt;%</code> we can write all these steps one under the other in one chunk of code.</p>
<p><strong>Exercise 9</strong></p>
<p>Load the file <strong>alcohol_exp</strong> to a data frame called <strong>df</strong>. Then write the appropriate commands to complete the following steps:</p>
<ol style="list-style-type: decimal">
<li>Set group, session, meditation, and gender as factors</li>
<li>Keep only these four variables and response.rt</li>
<li>Recode session from 1 and 2 to <strong>pre</strong> and <strong>post</strong></li>
<li>Recode group from 1 and 2 to <strong>high</strong> and <strong>low</strong></li>
<li>Keep only Female participants</li>
<li>Keep only response.rt below 1.5</li>
<li>save your final data frame into a file called <strong>“wastedresources.csv”</strong></li>
</ol>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="session5.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb73-2"><a href="session5.html#cb73-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;alcohol_exp.csv&quot;</span>)</span>
<span id="cb73-3"><a href="session5.html#cb73-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-4"><a href="session5.html#cb73-4" aria-hidden="true" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb73-5"><a href="session5.html#cb73-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">as.factor</span>(group)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-6"><a href="session5.html#cb73-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">session =</span> <span class="fu">as.factor</span>(session)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-7"><a href="session5.html#cb73-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">meditation =</span> <span class="fu">as.factor</span>(meditation)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-8"><a href="session5.html#cb73-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gender =</span> <span class="fu">as.factor</span>(gender)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-9"><a href="session5.html#cb73-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(group, session, meditation, gender, response.rt) <span class="sc">%&gt;%</span> </span>
<span id="cb73-10"><a href="session5.html#cb73-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(gender <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb73-11"><a href="session5.html#cb73-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(response.rt <span class="sc">&lt;</span> <span class="fl">1.5</span>) <span class="sc">%&gt;%</span> <span class="do">### this could be done with the above</span></span>
<span id="cb73-12"><a href="session5.html#cb73-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gender =</span> <span class="fu">recode</span>(gender,<span class="st">&#39;1&#39;</span> <span class="ot">=</span> <span class="st">&quot;Male&quot;</span>, <span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="st">&quot;Female&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-13"><a href="session5.html#cb73-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gender =</span> <span class="fu">recode</span>(group,<span class="st">&#39;1&#39;</span> <span class="ot">=</span> <span class="st">&quot;High&quot;</span>, <span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="st">&quot;Low&quot;</span>))</span>
<span id="cb73-14"><a href="session5.html#cb73-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-15"><a href="session5.html#cb73-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-16"><a href="session5.html#cb73-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-17"><a href="session5.html#cb73-17" aria-hidden="true" tabindex="-1"></a><span class="do">### and just for fun lets also create a histogram of reaction times.</span></span>
<span id="cb73-18"><a href="session5.html#cb73-18" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(df3<span class="sc">$</span>response.rt)</span>
<span id="cb73-19"><a href="session5.html#cb73-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-20"><a href="session5.html#cb73-20" aria-hidden="true" tabindex="-1"></a><span class="do">### lets save the data file</span></span>
<span id="cb73-21"><a href="session5.html#cb73-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-22"><a href="session5.html#cb73-22" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(df3, <span class="st">&quot;wastedresources.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="an-example-of-a-fyp-data-analysis" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> An example of a FYP data analysis<a href="session5.html#an-example-of-a-fyp-data-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let’s assume that the datafile <strong>alcohol_qualtrics.csv</strong> (you can find it on Moodle in the fRom zeRo to heRo section) has been generated by Qualtrics and we want to go through the analysis with our FYP students. The process of going through the analysis will vary for different projects but in general we can assume the three main steps are the following:</p>
<ol style="list-style-type: decimal">
<li>Cleaning the data<br />
</li>
<li>Creating new variables (e.g., overall scores for questionnaires)<br />
</li>
<li>Carrying out the main analysis</li>
</ol>
</div>
<div id="a-brief-overview-of-our-data" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> A brief overview of our data<a href="session5.html#a-brief-overview-of-our-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li><strong>id</strong> is the participant code<br />
</li>
<li><strong>participant</strong> is also our participant code<br />
</li>
<li><strong>gender</strong> 1: male, 2:female<br />
</li>
<li><strong>Age</strong> in years<br />
</li>
<li><strong>Days1</strong> to <strong>Days4</strong> are items of the <strong>Days</strong> questionnaire that is scored as the sum of its items (Likert 1-5)<br />
</li>
<li><strong>Smoke</strong> whether a participant smokes tobacco, 1: Yes, 2:No<br />
</li>
<li><strong>Drinks</strong> the number of days of the week that the participant consumes alcohol<br />
</li>
<li><strong>Years</strong> the number of years that the participant has been consuming alcohol<br />
</li>
<li><strong>Freq1</strong> to <strong>Freq4</strong> items of the <strong>Frequency</strong> questionnaire that is scored as the mean of its items (Likert 1-5)<br />
</li>
<li><strong>Units</strong> number of alcohol units consumed in a week</li>
</ol>
<p>The rest of the columns are irrelevant and we will not be working with them. Before we carry out any analysis we want to prepare our data file. Follow the steps described in the exercise below to prepare your datafile.</p>
</div>
<div id="exercise-6.1" class="section level2 hasAnchor" number="6.6">
<h2><span class="header-section-number">6.6</span> Exercise 6.1<a href="session5.html#exercise-6.1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>Load the file <strong>“alcohol_qualtrics.csv”</strong> to a data frame</li>
<li>Drop all the variables after the column 17 (drop column 17 as well)</li>
<li>Remove any participants with participant number below 100 and above 300<br />
</li>
<li>Make sure gender and smoke are factors</li>
<li>Add a column that is the sum of Days1 to Days4</li>
<li>Reverse code the variable Freq4</li>
<li>Add a column that is the mean of Freq1, Freq2, Freq3, and the above reversed coded variable</li>
<li>Save the final file using a file name of your choice.</li>
</ol>
</div>
<div id="working-through-our-participants-section" class="section level2 hasAnchor" number="6.7">
<h2><span class="header-section-number">6.7</span> Working through our participants section<a href="session5.html#working-through-our-participants-section" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Typically in our participants section we want to provide some descriptive figures for age and frequencies per gender.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="session5.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb74-2"><a href="session5.html#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rstatix)  </span>
<span id="cb74-3"><a href="session5.html#cb74-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-4"><a href="session5.html#cb74-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;alcohol_qualtrics.csv&quot;</span>)</span>
<span id="cb74-5"><a href="session5.html#cb74-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-6"><a href="session5.html#cb74-6" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>gender <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(df<span class="sc">$</span>gender)</span>
<span id="cb74-7"><a href="session5.html#cb74-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-8"><a href="session5.html#cb74-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-9"><a href="session5.html#cb74-9" aria-hidden="true" tabindex="-1"></a><span class="do">### Overall demographics  </span></span>
<span id="cb74-10"><a href="session5.html#cb74-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-11"><a href="session5.html#cb74-11" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb74-12"><a href="session5.html#cb74-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_summary_stats</span>(Age)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 13
##   variable     n   min   max median    q1    q3   iqr   mad  mean    sd    se
##   &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Age        105    18    99     19    19    20     1  1.48  20.6  9.15 0.893
## # ... with 1 more variable: ci &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="session5.html#cb76-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb76-2"><a href="session5.html#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(gender)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   gender     n
##   &lt;fct&gt;  &lt;int&gt;
## 1 1         13
## 2 2         92</code></pre>
<p>In some cases we might also want to further break down that information per group. Below we can see how we can achieve that.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="session5.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="do">### If you havent done so make sure Smoke is a factor</span></span>
<span id="cb78-2"><a href="session5.html#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="session5.html#cb78-3" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb78-4"><a href="session5.html#cb78-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Smoke) <span class="sc">%&gt;%</span> </span>
<span id="cb78-5"><a href="session5.html#cb78-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_summary_stats</span>(Age)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 14
##   Smoke variable     n   min   max median    q1    q3   iqr   mad  mean    sd
##   &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1 Age         18    18    99     20  19    20.8  1.75  1.48  26.8 21.3 
## 2     2 Age         87    18    30     19  18.5  20    1.5   1.48  19.3  1.49
## # ... with 2 more variables: se &lt;dbl&gt;, ci &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="session5.html#cb80-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb80-2"><a href="session5.html#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Smoke) <span class="sc">%&gt;%</span> </span>
<span id="cb80-3"><a href="session5.html#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(gender)</span></code></pre></div>
<pre><code>## # A tibble: 4 x 3
## # Groups:   Smoke [2]
##   Smoke gender     n
##   &lt;dbl&gt; &lt;fct&gt;  &lt;int&gt;
## 1     1 1          4
## 2     1 2         14
## 3     2 1          9
## 4     2 2         78</code></pre>
</div>
<div id="exercise-6.2" class="section level2 hasAnchor" number="6.8">
<h2><span class="header-section-number">6.8</span> Exercise 6.2<a href="session5.html#exercise-6.2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Acquire descriptive figures (overall and per Smoke group) for the variables <strong>Drinks</strong>, <strong>Years</strong>, <strong>Frequency</strong>, <strong>Days</strong>, and <strong>Units</strong>.</p>
</div>
<div id="running-a-simple-correlational-analysis-for-frequency-and-days" class="section level2 hasAnchor" number="6.9">
<h2><span class="header-section-number">6.9</span> Running a simple correlational analysis for Frequency and Days<a href="session5.html#running-a-simple-correlational-analysis-for-frequency-and-days" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We can now carry out a simple correlational analysis. This will be just as means of demonstration. There will be a dedicated session on Correlation and Regression. As we have already prepared our Frequency and Days variables we can proceed with the correlation function.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="session5.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="do">###  cor_test is part of the rstatix package</span></span>
<span id="cb82-2"><a href="session5.html#cb82-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-3"><a href="session5.html#cb82-3" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb82-4"><a href="session5.html#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor_test</span>(Frequency, Days, <span class="at">method =</span> <span class="st">&quot;pearson&quot;</span>)</span></code></pre></div>
<p>The <strong>cor_test()</strong> function offers a variety of arguments that will allow us to run all sorts of correlation combination. Let us see the <strong>help</strong> for this function. We can access the help is built-in within R in a number of different ways. We could place our cursor in the function we need help for and press F1. Or at the bottom right pane we can click on Help and then type the name of the function.</p>
</div>
<div id="in-conclusion" class="section level2 hasAnchor" number="6.10">
<h2><span class="header-section-number">6.10</span> In conclusion<a href="session5.html#in-conclusion" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Carrying out a FYP data analysis can be broken down to smaller pieces and generally this approach can be quite helpful. Always try to have different scripts for data preparation, demographics, and your main data analysis. This will also make it easier to recycle through your scripts and use them across different projects.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="session4.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="session7.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Kent R training.pdf", "Kent R training.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
